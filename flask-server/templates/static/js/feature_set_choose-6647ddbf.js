const p=Vue.createElementVNode("i",{class:"el-icon-upload"},null,-1),m=Vue.createElementVNode("div",{class:"el-upload__text"},[Vue.createTextVNode("将文件拖到此处，或"),Vue.createElementVNode("em",null,"点击上传")],-1),_=Vue.createElementVNode("span",{style:{"margin-top":"10px","font-size":"12px",color:"#999"}}," 高交叉率有助于增加种群的多样性 ",-1),E=Vue.defineComponent({__name:"feature_set_choose",setup(v){const o=Vue.ref([]),a=Vue.ref(!1),u=Vue.ref("开始特征选择"),n=Vue.ref(!1),l=Vue.ref(!0),c=(t,e,s)=>{o.value.push(e.raw),ElementPlus.ElMessage({type:"success",message:"上传成功"}),l.value=!1},d=t=>{if(t.name.split(".")[1]!=="xlsx")return ElementPlus.ElMessage.error("请上传.xlsx文件"),!1},i=async()=>{if(a.value=!0,u.value="处理中...",l.value=!0,!o.value||o.value.length===0){ElementPlus.ElMessage.error("请上传文件。");return}const t=new FormData;t.append("file",o.value[0]);try{const e=await fetch("http://localhost:5000/feature_selection",{method:"POST",body:t});if(!e.ok)throw new Error("网络响应不正常");const s=await e.blob();V(s)}catch(e){console.error("发生了与 fetch 操作相关的问题：",e),a.value=!1,u.value="开始特征选择",l.value=!1}},f=(t,e,s)=>{ElementPlus.ElMessage.error("上传文件发生错误，请检查文件是否正确")},V=t=>{const e=new Blob([t],{type:"text/csv"}),s=window.URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.setAttribute("download","results.csv"),document.body.appendChild(r),r.click(),a.value=!1,u.value="开始特征选择",l.value=!1};return(t,e)=>(Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createVNode(Vue.unref(ElementPlus.ElUpload),{class:"upload-demo","on-error":f,drag:"",action:"/upload","show-file-list":!1,"on-success":c,"before-upload":d,disabled:n.value,limit:1},{default:Vue.withCtx(()=>[p,m,Vue.createTextVNode(" (最多上传一个文件) ")]),_:1},8,["disabled"]),Vue.createVNode(Vue.unref(ElementPlus.ElButton),{type:"primary",onClick:i,disabled:l.value},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(u.value),1)]),_:1},8,["disabled"]),_,a.value?(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElLoading),{key:0,text:"处理中...",fullscreen:""})):Vue.createCommentVNode("",!0)]))}});export{E as default};
